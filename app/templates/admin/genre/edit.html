{% extends "base.html" %}

{% block content %}
<div class="container mt-5">
  {# Decide the heading based on whether or not model is None #}
  <h2>{{ "Edit Genre" if model else "Create Genre" }}</h2>

  {# Decide the form's action based on whether or not model is None #}
  <form action="{{ url_for('genre.edit', id=model.id) if model else url_for('genre.create') }}" method="post">
    {{ form.hidden_tag() }}

    {# Hidden ID Field (only populated if editing) #}
    {{ form.id() }}

    {# Name Field #}
    <div class="form-group">
      {{ form.name.label }}
      {{ form.name(class="form-control") }}
    </div>
    {% if form.name.errors %}
    <span class="text-danger">{{ form.name.errors[0] }}</span>
    {% endif %}

    {# Description Field #}
    <div class="form-group">
      {{ form.description.label }}
      {{ form.description(class="form-control", rows=5) }}
    </div>
    {% if form.description.errors %}
    <span class="text-danger">{{ form.description.errors[0] }}</span>
    {% endif %}

    {# Image Reference Field #}
    <div class="form-group">
      {{ form.imageref.label }}
      {{ form.imageref(class="form-control") }}
    </div>
    {% if form.imageref.errors %}
    <span class="text-danger">{{ form.imageref.errors[0] }}</span>
    {% endif %}

    <button type="submit" class="btn btn-primary">{{ "Save Changes" if model else "Create" }}</button>

    <div class="mt-4">
      <a href="{{ url_for('genre.list') }}" class="btn btn-secondary">Back to Index</a>
    </div>
  </form>
</div>
{% endblock %}